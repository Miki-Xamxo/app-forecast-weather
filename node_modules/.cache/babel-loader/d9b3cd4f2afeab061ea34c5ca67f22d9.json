{"ast":null,"code":"const initialState = {\n  items: [],\n  isLoading: false\n};\n\nconst findDay = (day, dayWeek) => {\n  let date = new Date(day.dt_txt).toLocaleString(\"ru\", {\n    weekday: \"long\"\n  });\n  return date === dayWeek;\n};\n\nconst week = arr => {\n  const result = arr.reduce((arr, dayWeek) => {\n    let date = new Date(dayWeek.dt_txt).toLocaleString(\"ru\", {\n      weekday: \"long\",\n      month: \"long\",\n      day: \"numeric\"\n    });\n    const [week, month] = date.split(',');\n    console.log(month);\n\n    if (!arr.includes(week || month)) {\n      return [...arr, week, month];\n    }\n\n    return arr;\n  }, []);\n  return result;\n};\n\nconst createArr = arr => {\n  return arr.map(elem => {\n    let dateVal = new Date(elem.dt_txt).toLocaleString(\"ru\", {\n      month: \"long\",\n      day: \"numeric\",\n      hour: \"numeric\",\n      minute: \"numeric\"\n    });\n    const [date, time] = dateVal.split(',');\n    return {\n      date,\n      time,\n      temp: Math.ceil(elem.main.temp),\n      feels_like: Math.ceil(elem.main.feels_like),\n      weather: elem.weather[0]\n    };\n  });\n};\n\nconst weather = (state = initialState, action) => {\n  switch (action.type) {\n    case 'SET_DATA_WEATHER':\n      const newItems = week(action.payload.list).map(item => {\n        console.log(item);\n        return {\n          day: item,\n          data: createArr(action.payload.list.filter(day => findDay(day, item)))\n        };\n      });\n      return { ...state,\n        items: newItems,\n        isLoading: false\n      };\n\n    case 'SET_LOADING':\n      return { ...state,\n        isLoading: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default weather;","map":{"version":3,"sources":["C:/My project/react-weather-forecast/app-weather-forecast/src/redux/reducers/weather.js"],"names":["initialState","items","isLoading","findDay","day","dayWeek","date","Date","dt_txt","toLocaleString","weekday","week","arr","result","reduce","month","split","console","log","includes","createArr","map","elem","dateVal","hour","minute","time","temp","Math","ceil","main","feels_like","weather","state","action","type","newItems","payload","list","item","data","filter"],"mappings":"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","sourcesContent":["\r\n\r\nconst initialState = {\r\n    items: [],\r\n    isLoading: false\r\n}\r\n\r\n\r\nconst findDay = (day, dayWeek) => {\r\n    let date = new Date(day.dt_txt).toLocaleString(\"ru\", {weekday: \"long\"});\r\n    return date === dayWeek\r\n}\r\n\r\nconst week = (arr) => {\r\n    const result =  arr.reduce((arr, dayWeek) => {\r\n        let date = new Date(dayWeek.dt_txt).toLocaleString(\"ru\", {weekday: \"long\",  month: \"long\", day: \"numeric\"});\r\n        const [week, month] = date.split(',')\r\n        console.log(month)\r\n        if(!arr.includes(week || month)){\r\n            return [...arr, week, month]\r\n        }\r\n        return arr\r\n    }, [])\r\n    return result\r\n}\r\n\r\n\r\nconst createArr = (arr) => {\r\n    return(\r\n        arr.map(( elem => {\r\n            let dateVal = new Date( elem.dt_txt ).toLocaleString(\"ru\", {\r\n            month: \"long\", \r\n            day: \"numeric\", \r\n            hour: \"numeric\",\r\n            minute: \"numeric\" \r\n            });\r\n            const [date, time] = dateVal.split(',')\r\n            return {\r\n                date,\r\n                time,\r\n                temp: Math.ceil(elem.main.temp), \r\n                feels_like: Math.ceil(elem.main.feels_like),\r\n                weather: elem.weather[0]\r\n                }\r\n            } )\r\n        )\r\n    )\r\n}\r\n\r\nconst weather = (state = initialState, action) => {\r\n    switch(action.type){\r\n        case 'SET_DATA_WEATHER':\r\n\r\n            const newItems = week(action.payload.list).map(item => {\r\n                console.log(item)\r\n                return {\r\n                    day: item,\r\n                    data: createArr( action.payload.list.filter(day => findDay(day, item)))\r\n                }\r\n            })\r\n\r\n            return {\r\n                ...state,\r\n                items: newItems,\r\n                isLoading: false\r\n            }\r\n        case 'SET_LOADING':\r\n            return {\r\n                ...state,\r\n                isLoading: action.payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default weather"]},"metadata":{},"sourceType":"module"}